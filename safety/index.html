<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S-RAY | Crowd Safety Intelligence</title>
    
    <!-- Fonts: DM Sans for a modern, human, yet engineered feel -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="../logo.png" type="image/png">

    <!-- Three.js & GSAP + ScrollTrigger -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        /* --- CORE VISUALS & RESET --- */
        :root {
            /* Palette: Deep Ocean & Bioluminescence (Calm, Safe, Intelligent) */
            --bg-deep: #020408;       /* Almost Black Blue */
            --bg-surface: #0a111a;    /* Deep Navy */
            
            --grad-primary: linear-gradient(135deg, #00c6ff 0%, #0072ff 100%); /* Luminous Blue */
            --grad-glow: radial-gradient(circle at center, rgba(0, 198, 255, 0.15) 0%, rgba(5, 10, 20, 0) 70%);

            --accent-safe: #00d2ff;   /* Cyan */
            --accent-warm: #ff9a9e;   /* Soft Peach/Pink for humanity */
            --accent-alert: #ffb74d;  /* Amber for alerts */

            --text-white: #ffffff;
            --text-dim: #8b9bb4;      /* Cool Grey */
            
            --glass-bg: rgba(10, 17, 26, 0.6); /* Slightly more opaque for nav */
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-highlight: rgba(255, 255, 255, 0.15);
            
            --font-main: 'DM Sans', sans-serif;
            --ease-out: cubic-bezier(0.215, 0.61, 0.355, 1);
            --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
            --nav-height: 80px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        html.lenis { height: auto; }
        .lenis.lenis-smooth { scroll-behavior: auto; }
        .lenis.lenis-smooth [data-lenis-prevent] { overscroll-behavior: contain; }
        .lenis.lenis-stopped { overflow: hidden; }
        .lenis.lenis-scrolling iframe { pointer-events: none; }

        body {
            background-color: var(--bg-deep);
            color: var(--text-white);
            font-family: var(--font-main);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* --- TYPOGRAPHY (ENHANCED 3D) --- */
        h1, h2, h3, h4 { font-weight: 600; line-height: 1.1; letter-spacing: -0.03em; }
        
        /* Animated Gradient Text with Depth */
        .text-gradient-flow {
            background: linear-gradient(270deg, #fff, #00c6ff, #0072ff, #fff);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 6s ease infinite;
            filter: drop-shadow(0 0 15px rgba(0, 198, 255, 0.3));
            transform: translateZ(0); /* Hardware accel */
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .display-text {
            font-size: clamp(2rem, 4vw, 2rem);
             background: linear-gradient(180deg, #fff 0%, #a5b4fc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 2rem;
            text-shadow: 0 0 40px rgba(0, 198, 255, 0.2);
            margin-bottom: 2rem;
            /* 3D extrusion effect via text-shadow */
            text-shadow: 
                0 0 10px rgba(0, 210, 255, 0.1),
                0 0 20px rgba(0, 210, 255, 0.1),
                0 0 40px rgba(0, 210, 255, 0.2);
            position: relative;
            z-index: 10;
        }

        .section-title {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            line-height: 1.1;
            /* Subtle 3D lift */
            transform: perspective(500px) translateZ(0);
            transition: transform 0.5s ease;
        }
        
        .section-title:hover {
            transform: perspective(500px) translateZ(20px);
        }

        /* Word wrapper for staggered animation */
        .word-wrapper {
            display: inline-block;
            transform-origin: bottom center;
            will-change: transform, opacity;
        }

        p {
            font-size: 1.15rem;
            line-height: 1.7;
            color: var(--text-dim);
            font-weight: 300;
        }

        /* --- LAYOUT & UTILS --- */
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 2rem;
            position: relative;
            z-index: 2;
        }

        /* Default spacer */
        .section-spacer { padding: 8rem 0; }
        
        /* OVERVIEW OVERRIDE: Pull up to merge with Hero */
        #overview { 
            padding-top: 0; 
            margin-top: -15vh; /* Pulls content up into the Hero's bottom fade */
            position: relative;
            z-index: 10; /* Ensures text sits on top of the background fade */
        }

        /* --- NAVIGATION --- */
        .navbar {
            position: fixed;
            top: 20px; /* Floating look */
            left: 50%;
            transform: translateX(-50%);
            width: 95%;
            max-width: 1400px;
            height: 70px;
            z-index: 1000;
            background: rgba(10, 17, 26, 0.6);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 50px; /* Pill shape */
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .navbar.scrolled {
            top: 0;
            width: 100%;
            border-radius: 0;
            background: rgba(2, 4, 8, 0.9);
            border-bottom: 1px solid var(--glass-border);
            border-top: none;
            border-left: none;
            border-right: none;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 100%;
            padding: 0 2rem;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-white);
            text-decoration: none;
            letter-spacing: -0.02em;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: transform 0.3s ease;
        }
        .logo:hover { transform: scale(1.05); }

        .logo-dot {
            width: 12px; height: 12px;
            background: var(--accent-safe);
            border-radius: 50%;
            box-shadow: 0 0 15px var(--accent-safe);
            animation: pulseDot 2s infinite;
        }

        @keyframes pulseDot {
            0% { box-shadow: 0 0 0 0 rgba(0, 210, 255, 0.7); }
            70% { box-shadow: 0 0 0 12px rgba(0, 210, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 210, 255, 0); }
        }

        .nav-links {
            display: flex;
            gap: 2.5rem;
        }
        
        .nav-link {
            color: var(--text-dim);
            text-decoration: none;
            font-size: 0.95rem;
            font-weight: 500;
            transition: all 0.3s;
            position: relative;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0%;
            height: 2px;
            background: var(--accent-safe);
            transition: width 0.3s ease;
            box-shadow: 0 0 10px var(--accent-safe);
        }
        .nav-link:hover { color: var(--text-white); }
        .nav-link:hover::after { width: 100%; }

        /* 3D Button Press Effect */
        .btn-3d-press {
            transition: transform 0.1s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.2s, background 0.3s;
            will-change: transform;
        }
        .btn-3d-press:active {
            transform: scale(0.95) translateY(2px);
            box-shadow: 0 0 5px rgba(0, 210, 255, 0.1);
        }

        .nav-cta {
            padding: 12px 28px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 50px;
            color: white;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
            backdrop-filter: blur(5px);
        }
        .nav-cta:hover {
            background: var(--text-white);
            color: var(--bg-deep);
            box-shadow: 0 0 30px rgba(255,255,255,0.3);
        }
        
        /* Mobile Nav Toggle */
        .mobile-menu-btn { display: none; color: white; font-size: 1.5rem; }

        @media (max-width: 768px) {
            .nav-links { display: none; }
            .mobile-menu-btn { display: block; }
            .navbar { top: 0; width: 100%; border-radius: 0; }
        }

        .nav-links.mobile-open {
            display: flex !important;
            flex-direction: column;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(2, 4, 8, 0.95);
            padding: 1rem 0;
            border-radius: 0 0 12px 12px;
            z-index: 1000;
        }

        .nav-links.mobile-open .nav-link {
            padding: 1rem 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-links.mobile-open .nav-link:last-child {
            border-bottom: none;
        }

        /* 3D Tilt Card Base */
        .tilt-card {
            transform-style: preserve-3d;
            perspective: 1000px; /* Scene depth */
        }

        /* Cinematic Glass Cards with Shimmer */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid var(--glass-border);
            border-top: 1px solid var(--glass-highlight);
            border-radius: 24px;
            box-shadow: 0 20px 40px -10px rgba(0,0,0,0.5);
            transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
            height: 100%;
            position: relative;
            overflow: hidden;
        }
        
        /* Shimmer Effect */
        .glass-panel::after {
            content: "";
            position: absolute;
            top: 0; right: 0; bottom: 0; left: 0;
            background: linear-gradient(120deg, transparent, rgba(255,255,255,0.05), transparent);
            transform: translateX(-100%);
            transition: 0.6s;
        }

        .glass-panel:hover::after {
            transform: translateX(100%);
        }

        /* Hover Effect for Glass Panels */
        .glass-panel:hover {
            border-color: rgba(0, 210, 255, 0.5);
            box-shadow: 
                0 40px 80px -12px rgba(0,0,0,0.7),
                0 0 40px rgba(0, 210, 255, 0.15);
            transform: translateY(-5px) scale(1.01);
        }

        /* 3D Feature Cards */
        .feature-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 2rem;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform-style: preserve-3d;
            perspective: 1000px;
            opacity: 0;
            transform: translateY(30px);
            position: relative;
            overflow: hidden;
        }
        
        .feature-card::before {
            content: '';
            position: absolute;
            width: 100px; height: 100px;
            background: var(--accent-safe);
            filter: blur(60px);
            top: -20px; right: -20px;
            opacity: 0;
            transition: opacity 0.4s;
        }
        
        .feature-card:hover::before { opacity: 0.2; }

        .feature-card:hover {
            background: rgba(255, 255, 255, 0.06);
            border-color: rgba(0, 210, 255, 0.5);
            box-shadow: 0 30px 50px -10px rgba(0, 0, 0, 0.6), inset 0 0 20px rgba(0, 210, 255, 0.05);
            transform: translateY(-8px) scale(1.02);
        }
        
        .feature-card:hover .icon-box svg {
            transform: scale(1.2) rotate(5deg);
            filter: drop-shadow(0 0 10px var(--accent-safe));
        }

        /* Elegant Button */
        .btn-cinematic {
            position: relative;
            padding: 20px 42px;
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-weight: 600;
            font-size: 1.15rem;
            border-radius: 100px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            overflow: hidden;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            display: inline-block;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .btn-cinematic:hover { 
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.6);
            box-shadow: 0 0 50px rgba(0, 210, 255, 0.25);
            text-shadow: 0 0 10px rgba(255,255,255,0.8);
            transform: translateY(-2px);
        }

        /* --- HERO SECTION --- */
        .hero {
            position: relative;
            height: 110vh; /* slightly taller for better scroll */
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            perspective: 1000px;
            margin-top: -80px; /* Offset nav */
            padding-top: 80px;
        }

        /* Gradient Fade to Merge with Next Section */
        .hero::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 400px; /* Increased Height for smoother merge */
            background: linear-gradient(to bottom, rgba(2, 4, 8, 0) 0%, var(--bg-deep) 90%);
            z-index: 5; /* Above canvas, below text content */
            pointer-events: none;
        }

        /* 3D WebGL Container */
        #webgl-container {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 0;
            background: var(--bg-deep); /* Fallback */
        }

        /* Vignette for cinematic focus - Reduced opacity for visibility */
        .vignette {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            /* Much lighter gradient so corners aren't too dark */
            background: radial-gradient(circle at center, rgba(5, 10, 20, 0.05) 30%, rgba(2, 4, 8, 0.6) 100%);
            z-index: 2;
            pointer-events: none;
        }

        .hero-content {
            text-align: center;
            z-index: 10;
            opacity: 0; /* Hidden initially, GSAP will handle reveal */
            max-width: 900px;
            pointer-events: none; /* Let clicks pass to 3D if needed */
        }
        .hero-content > * { pointer-events: auto; }

        /* Floating Badge */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 10px 20px;
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 50px;
            font-size: 0.95rem;
            letter-spacing: 0.15em;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-dim);
            margin-bottom: 2.5rem;
            backdrop-filter: blur(10px);
            /* Pulsing Animation */
            animation: badgePulse 3s infinite;
            transition: all 0.3s;
        }
        .badge:hover {
            background: rgba(0, 210, 255, 0.1);
            color: white;
            border-color: var(--accent-safe);
        }
        
        @keyframes badgePulse {
            0%, 100% { box-shadow: 0 0 0 rgba(0, 210, 255, 0); border-color: rgba(0, 210, 255, 0.3); }
            50% { box-shadow: 0 0 20px rgba(0, 210, 255, 0.2); border-color: rgba(0, 210, 255, 0.8); }
        }

        /* --- CONTENT GRIDS --- */
        .grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 2rem;
        }
        
        /* New Single Column Layout for Overview */
        .single-column-stack {
            display: flex;
            flex-direction: column;
            gap: 1rem; /* Reduced gap to bring card closer */
            max-width: 1000px; /* Wider to fit 3 cards nicely */
            margin: 0 auto; /* Center alignment */
        }

        .col-span-8 { grid-column: span 8; }
        .col-span-4 { grid-column: span 4; }
        .col-span-6 { grid-column: span 6; }
        .col-span-5 { grid-column: span 5; }
        .col-span-1 { grid-column: span 1; }
        .col-span-3 { grid-column: span 3; }
        .col-span-12 { grid-column: span 12; }

        @media (max-width: 1024px) {
            .col-span-8, .col-span-4, .col-span-6, .col-span-5, .col-span-3 { grid-column: span 12; }
            .col-span-1 { display: none; } /* Hide spacer on mobile */
            .display-text { font-size: 3.5rem; }
        }

        /* --- VISUAL ELEMENTS --- */
        /* Abstract Crowd Flow Visualizer */
        .vis-wrapper {
            height: 350px; /* Slightly shorter for grid */
            background: rgba(0,0,0,0.2);
            border-radius: 16px;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.8s ease;
        }

        /* Soft Pulse Effect (Not a radar) */
        .soft-pulse {
            position: absolute;
            width: 250px; height: 250px;
            border-radius: 50%;
            animation: breathe 4s ease-in-out infinite;
            transition: background 0.8s ease;
        }

        /* Feature Icon Box */
        .icon-box {
            width: 60px; height: 60px;
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            display: flex; align-items: center; justify-content: center;
            margin-bottom: 1.5rem;
            color: var(--accent-safe);
            transition: transform 0.4s ease, background 0.4s;
        }
        
        .icon-box svg { transition: transform 0.4s ease; width: 28px; height: 28px; }

        /* Data cards */
        .stat-number { font-size: 4rem; font-weight: 700; color: white; line-height: 1; text-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .stat-label { font-size: 1.1rem; color: var(--text-dim); margin-top: 0.5rem; font-weight: 500; }

        /* --- ANIMATIONS (GSAP Controlled) --- */
        /* Removed CSS .reveal classes to prevent conflicts with GSAP */
        .reveal, .pop-single {
            opacity: 0; /* Default hidden, GSAP will show it */
            visibility: hidden;
        }
        
        .animated-line {
            display: block;
            opacity: 0;
            transform: translateY(20px);
        }
        
        @keyframes breathe { 0%, 100% { transform: scale(0.9); opacity: 0.4; } 50% { transform: scale(1.1); opacity: 0.8; } }

        /* --- SAFETY MAP STYLES (ENHANCED - GOOGLE MAPS STYLE) --- */
        .safety-container {
            display: grid;
            grid-template-columns: 1fr 1.5fr; /* More space for map */
            gap: 4rem;
            align-items: center;
        }
        .safety-map-wrapper {
            height: 550px; /* Taller for better map view */
            background: #242f3e; /* Google Maps Dark Theme Base */
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 40px 80px -20px rgba(0,0,0,0.8);
            transform-style: preserve-3d;
            perspective: 1000px;
        }
        #safety-canvas {
            width: 100%;
            height: 100%;
        }
        
        /* Floating Navigation Header */
        .nav-overlay-header {
            position: absolute;
            top: 25px;
            left: 25px;
            right: 25px;
            background: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(15px);
            padding: 18px;
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.15);
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.4);
            transition: transform 0.3s ease;
            z-index: 10;
        }
        
        .nav-text h4 { margin: 0; font-size: 1.2rem; color: white; font-weight: 600; }
        .nav-text p { margin: 0; font-size: 0.95rem; color: #94a3b8; }

        /* Floating Stats Bottom */
        .nav-overlay-bottom {
            position: absolute;
            bottom: 25px;
            left: 25px;
            display: flex;
            gap: 12px;
            z-index: 10;
        }
        .nav-tag {
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(10px);
            color: white;
            padding: 8px 16px;
            border-radius: 30px;
            font-size: 0.9rem;
            font-weight: 600;
            border: 1px solid rgba(255,255,255,0.15);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .nav-tag.time { color: #00e676; border-color: rgba(0, 230, 118, 0.3); }

        .guidance-panel h3 { font-size: 2.5rem; margin-bottom: 1.5rem; color: var(--text-white); line-height: 1.1; font-weight: 600; }
        
        .guidance-step {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
            padding: 1.5rem;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 20px;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            opacity: 0.6; /* Dim inactive */
            position: relative;
            overflow: hidden;
        }
        
        /* Active State Style */
        .guidance-step.active {
            border: 1px solid var(--accent-safe);
            background: linear-gradient(90deg, rgba(0, 210, 255, 0.08) 0%, rgba(0, 210, 255, 0.02) 100%);
            transform: translateX(10px) scale(1.02);
            opacity: 1;
            box-shadow: 0 15px 40px -10px rgba(0, 210, 255, 0.15);
        }
        
        .route-status {
            display: inline-block;
            font-size: 0.8rem;
            padding: 5px 12px;
            border-radius: 20px;
            margin-bottom: 0.7rem;
            font-weight: 700;
            letter-spacing: 0.05em;
        }
        .status-optimal { background: rgba(0,255,127,0.15); color: #00ff7f; }
        .status-busy { background: rgba(255,165,0,0.15); color: #ffa500; }

        @media (max-width: 900px) {
            .safety-container { grid-template-columns: 1fr; }
            .safety-map-wrapper { height: 400px; }
        }

        /* --- ABOUT US STYLES (OUTSTANDING 3D CSS) --- */
        .team-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2.5rem;
            perspective: 2000px; /* Essential for 3D depth */
        }
        
        .team-member {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            padding: 2.5rem;
            border-radius: 24px;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            
            /* 3D Transform Settings */
            transform-style: preserve-3d;
            transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            overflow: visible; /* Needed for elements popping out */
            
            /* Idle Float Animation */
            animation: floatCard 6s ease-in-out infinite;
            animation-delay: calc(var(--i, 0) * 0.5s);
        }

        /* Glare Effect */
        .team-member::before {
            content: '';
            position: absolute;
            top: 0;
            left: -150%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: skewX(-20deg);
            transition: 0.5s;
            pointer-events: none;
        }

        .team-member:hover::before {
            left: 150%;
            transition: 0.7s;
        }

        /* Float Keyframes */
        @keyframes floatCard {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }
        
        /* Outstanding Hover State */
        .team-member:hover {
            transform: translateY(-15px) rotateX(10deg) rotateY(2deg) scale(1.02);
            background: linear-gradient(145deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.01) 100%);
            border-color: var(--accent-safe);
            box-shadow: 
                0 30px 60px -15px rgba(0,0,0,0.8),
                0 0 25px rgba(0, 210, 255, 0.15),
                inset 0 0 20px rgba(0, 210, 255, 0.05);
            z-index: 100;
        }
        
        .member-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: rgba(0, 210, 255, 0.1);
            color: #00d2ff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.4rem;
            border: 1px solid rgba(0, 210, 255, 0.3);
            flex-shrink: 0;
            
            /* 3D Pop */
            transform: translateZ(30px);
            transition: transform 0.4s ease, background 0.3s, color 0.3s, box-shadow 0.3s;
        }

        .team-member:hover .member-avatar {
            transform: translateZ(80px) scale(1.15) rotate(-5deg); /* Major Pop */
            background: var(--accent-safe);
            color: #000;
            box-shadow: 0 0 30px var(--accent-safe);
            border-color: white;
        }
        
        .member-info {
            display: flex;
            flex-direction: column;
            transform: translateZ(20px);
            transition: transform 0.4s ease;
        }

        .team-member:hover .member-info {
             transform: translateZ(50px); /* Text floats up */
        }
        
        .team-name {
            font-size: 1.3rem;
            color: white;
            font-weight: 700;
            margin-bottom: 6px;
            transition: 0.3s;
        }

        .team-member:hover .team-name {
            text-shadow: 0 0 15px rgba(0, 210, 255, 0.6);
            color: var(--accent-safe);
        }
        
        .team-role {
            font-size: 0.95rem;
            color: var(--text-dim); /* Default dim */
            margin-bottom: 8px;
            font-weight: 500;
            transition: color 0.3s;
        }

        .team-member:hover .team-role {
            color: white;
        }
        
        .team-contact {
            font-size: 1rem;
            color: var(--text-dim);
            display: flex;
            align-items: center;
            gap: 8px;
            transition: color 0.3s, transform 0.3s;
        }

        .team-member:hover .team-contact {
            color: white;
        }

        /* Icon Spin on Hover */
        .team-contact svg {
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        .team-member:hover .team-contact svg {
            transform: rotate(360deg) scale(1.2);
            color: var(--accent-safe);
        }

        @media (max-width: 700px) {
            .team-grid {
                grid-template-columns: 1fr;
            }
            .team-member { padding: 1.5rem; }
        }
    </style>
</head>
<body>

    <!-- NAVIGATION -->
    <nav class="navbar">
        <div class="container nav-container">
            <a href="#" class="logo">
                <div class="logo-dot"></div>
                S-RAY
            </a>
            
            <div class="nav-links">
                <a href="#overview" class="nav-link">Features</a>
                <a href="#live-data" class="nav-link">Live Data</a>
                <a href="#safety" class="nav-link">Safety</a>
                <a href="#about" class="nav-link">Contact</a>
            </div>

            <a href="gpsTracking.html" class="nav-cta">Launch Dashboard</a>
            <div class="mobile-menu-btn">☰</div>
        </div>
    </nav>

    <!-- HERO SECTION -->
    <section class="hero">
        <!-- 3D Background Container -->
        <div id="webgl-container"></div>
        <div class="vignette"></div>
        
        <div class="hero-content">
            <div class="badge">Safety-First Crowd Monitoring</div>
            <h1 class="display-text">DENSITY IN VIEW,SAFETY CAN ENSUE</h1>
            <p style="margin-bottom: 3rem;">
                A real-time crowd intelligence platform powered by <strong>Computer Vision</strong> and <strong>Geo-Fencing</strong>. <br>
                Identify overcrowding risks instantly without facial recognition.
            </p>
            <button class="btn-cinematic" onclick="document.getElementById('overview').scrollIntoView({behavior: 'smooth'})">
                Explore The Intelligent Monitoring
            </button>
        </div>
    </section>

    <!-- OVERVIEW / FEATURES SECTION -->
    <section id="overview" class="section-spacer">
        <div class="container">
            <!-- Changed from .grid to .single-column-stack for vertical ordering -->
            <div class="single-column-stack">
                
                <!-- 1. Text Intro -->
                <div class="pop-group" style="width: 100%;">
                    <!-- Split text for animation targets -->
                    <h2 class="section-title">
                        <span class="word-wrapper">Intelligent</span> <span class="word-wrapper">monitoring</span><br>
                        <span class="word-wrapper">for</span> <span class="word-wrapper">complex</span> <span class="word-wrapper">spaces.</span>
                    </h2>
                    <p class="desc-text" style="margin: 0 auto 1rem; font-size: 1.25rem; color: #b0c4de; line-height: 1.7; max-width: 800px; text-align: center;">
                        <span class="animated-line">.</span>
                        <span class="animated-line" style="color: var(--accent-safe); font-weight: 500;">S-RAY solves this by converting live video feeds into anonymous data points.</span>
                    </p>
                </div>

                <!-- 2. Status Animation Card (Single Card, Cycling) -->
                <div class="pop-single" style="width: 100%;">
                    <div class="glass-panel" style="padding: 3rem; min-height: 350px; position: relative; overflow: hidden;">
                        <!-- Dynamic Background for Status -->
                        <div class="vis-wrapper" id="vis-bg" style="height: 100%; width: 100%; position: absolute; top:0; left:0; border: none; background: radial-gradient(circle, rgba(2,4,8,0.5) 0%, rgba(0,0,0,0) 80%);">
                            <!-- Animated Pulse -->
                            <div class="soft-pulse" id="status-pulse" style="width: 400px; height: 400px;"></div>
                            
                            <!-- Dynamic Status Text -->
                            <div style="position: absolute; text-align: center; z-index: 2; width: 100%; top: 50%; transform: translateY(-50%);">
                                <div id="status-text" style="font-size: 5rem; font-weight: 700; transition: color 0.5s ease; line-height: 1;">Safe</div>
                                <div id="status-sub" style="color: var(--text-dim); letter-spacing: 0.2em; text-transform: uppercase; font-size: 1rem; margin-top: 15px;">Status: Open</div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- DASHBOARD PREVIEW SECTION -->
    <section id="live-data" class="section-spacer" style="background: var(--bg-deep);">
        <div class="container">
            <div class="reveal" style="text-align: center; margin-bottom: 4rem;">
                <h2 style="font-size: 2.5rem;">Live Context</h2>
                <p>Real-time data stream from North Avenue Plaza</p>
            </div>

            <div class="grid">
                <!-- Large Metric: Occupancy -->
                <div class="col-span-4 glass-panel reveal" style="padding: 2.5rem; display: flex; flex-direction: column; justify-content: space-between;">
                    <div>
                        <div class="stat-label">Active Presence</div>
                        <div class="stat-number">2,840</div>
                    </div>
                    <div style="height: 6px; width: 100%; background: rgba(255,255,255,0.1); border-radius: 10px; margin-top: 2rem; overflow: hidden;">
                        <div style="height: 100%; width: 45%; background: var(--grad-primary); border-radius: 10px;"></div>
                    </div>
                    <div style="margin-top: 1rem; font-size: 0.9rem; color: var(--text-dim);">45% of comfortable capacity</div>
                </div>

                <!-- Insight Card: Prediction -->
                <div class="col-span-4 glass-panel reveal" style="padding: 2.5rem;">
                    <div class="stat-label">Flow Prediction</div>
                    <h3 style="font-size: 1.5rem; margin: 1rem 0;">Expect peak flow at North Gate in 15 mins.</h3>
                    <p style="font-size: 0.9rem; color: var(--text-dim);">
                        Based on historical transit arrival patterns. Recommendation: Open Gate B.
                    </p>
                </div>

                <!-- Status Card: Zones -->
                <div class="col-span-4 glass-panel reveal" style="padding: 2.5rem;">
                     <div class="stat-label">Zone Status</div>
                     <div style="margin-top: 1.5rem; display: flex; flex-direction: column; gap: 1rem;">
                        <div style="display: flex; justify-content: space-between; padding-bottom: 0.5rem; border-bottom: 1px solid rgba(255,255,255,0.05);">
                            <span>Plaza Core</span>
                            <span style="color: var(--accent-safe);">Fluid</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding-bottom: 0.5rem; border-bottom: 1px solid rgba(255,255,255,0.05);">
                            <span>West Entry</span>
                            <span style="color: var(--accent-safe);">Fluid</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>East Corridor</span>
                            <span style="color: var(--accent-alert);">Busy</span>
                        </div>
                     </div>
                </div>
            </div>
        </div>
    </section>

     <!-- NEW SMART EXIT GUIDANCE SECTION -->
    <section id="safety" class="section-spacer">
        <div class="container">
            <div class="safety-container reveal">
                <!-- Guidance Text Column -->
                <div class="guidance-panel">
                    <div class="badge" style="margin-bottom: 1.5rem; border-color: rgba(0,210,255,0.3); color: #00d2ff;">Live Navigation</div>
                    <h3>Smart Exit Guidance.</h3>
                    <p style="margin-bottom: 2rem; color: #b0c4de;">
                        Just like GPS for your car, S-RAY provides real-time walking directions for large crowds. It dynamically reroutes attendees away from bottlenecks to the nearest clear exit.
                    </p>
                    
                    <!-- Dynamic Step 1 -->
                    <div class="guidance-step active" id="step-A">
                        <!-- Removed step-icon -->
                        <div>
                            <span class="route-status status-optimal">FASTEST ROUTE</span>
                            <h4 style="font-size: 1.1rem; color: white;">Via Main Concourse</h4>
                            <p style="font-size: 0.9rem; color: var(--text-dim); margin-top: 4px;">2 min • Low Density</p>
                        </div>
                    </div>

                    <!-- Dynamic Step 2 -->
                    <div class="guidance-step" id="step-B">
                        <!-- Removed step-icon -->
                        <div>
                            <span class="route-status status-busy">REROUTING...</span>
                            <h4 style="font-size: 1.1rem; color: white;">Via East Wing</h4>
                            <p style="font-size: 0.9rem; color: var(--text-dim); margin-top: 4px;">4 min • Moderate Density</p>
                        </div>
                    </div>
                </div>
                <a href="shortestWay.html">
                <!-- Interactive Map Visual -->
                <div class="safety-map-wrapper">
                    <canvas id="safety-canvas"></canvas>
                    
                    <!-- GPS Header Overlay -->
                    <div class="nav-overlay-header" id="nav-header">
                        <!-- Removed nav-direction-icon -->
                        <div class="nav-text">
                            <h4 id="nav-instruction">Head North towards Gate A</h4>
                            <p id="nav-distance">150m to exit</p>
                        </div>
                    </div>

                    <!-- Bottom Stats -->
                    <div class="nav-overlay-bottom">
                        <div class="nav-tag time" id="nav-time">2 min</div>
                        <div class="nav-tag">150 m</div>
                    </div>
                </div>
                </a>

            </div>
        </div>
        
    
    <!-- ABOUT US SECTION (Mission & Team) -->
    <section id="about" class="section-spacer" style="padding-top: 6rem;">
        <div class="container">
            <div style="max-width: 1000px; margin: 0 auto;">
                
                <!-- Mission & Vision Content -->
                <div class="reveal" style="text-align: center; margin-bottom: 4rem;">
                     <h2 style="font-size: 2.5rem; margin-bottom: 1.5rem; line-height: 1;">Our Vision</h2>
                     
                     <p style="color: #b0c4de; font-size: 1.1rem; line-height: 1.6; margin-bottom: 2rem;">
                        Four visionary students from <strong>Vidyavardhini's Bhausaheb Vartak Polytechnic, Vasai</strong>.<br>
                        To redefine public safety by creating intelligent spaces where real-time crowd awareness prevents risk before it arises.
We envision a future where technology works silently and responsibly to protect lives, enhance movement, and build trust in shared environments.
                     </p>

                     <div style="margin-bottom: 3rem;">
                         <div class="badge" style="margin-bottom: 1rem; border-color: rgba(0, 210, 255, 0.3); color: #00d2ff;">OUR MISSION</div>
                         <h3 style="font-size: 1.8rem; color: white; margin-bottom: 1rem; font-weight: 300;">"Real-time solution for Social Good. Labor for Progress."</h3>
                         <p style="color: #94a3b8; max-width: 700px; margin: 0 auto; line-height: 1.7; font-size: 1rem;">We build scalable platforms that solve real-world problems while reducing human effort—starting with crowd safety, and expanding our vision to healthcare, education, and urban management for India's future.
                         </p>
                     </div>
                </div>

                <!-- Team Grid -->
                <div class="team-grid reveal">
                    
                    <!-- Team Member 1 -->
                    <div class="team-member" style="--i:0">
                        <div class="member-avatar">
                            <span>AF</span>
                        </div>
                        <div class="member-info">
                            <div class="team-name">Ajinkya Furange</div>
                            <div class="team-role" style="font-style: italic; opacity: 0.8;">"Error 404: Sleep not found"</div>
                            <div class="team-contact">
                                <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                                +91 81081 71769
                            </div>
                        </div>
                    </div>

                    <!-- Team Member 2 -->
                    <div class="team-member" style="--i:1">
                        <div class="member-avatar" style="background: rgba(123, 104, 238, 0.2); color: #7B68EE; border-color: rgba(123, 104, 238, 0.3);">
                            <span>RR</span>
                        </div>
                        <div class="member-info">
                            <div class="team-name">Ronit Rao</div>
                            <div class="team-role" style="font-style: italic; opacity: 0.8;">"Ctrl+C, Ctrl+V --> Debug --> Repeat"</div>
                            <div class="team-contact">
                                <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                                +91 88550 86919
                            </div>
                        </div>
                    </div>

                    <!-- Team Member 3 -->
                    <div class="team-member" style="--i:2">
                        <div class="member-avatar" style="background: rgba(224, 64, 251, 0.2); color: #E040FB; border-color: rgba(224, 64, 251, 0.3);">
                            <span>SD</span>
                        </div>
                        <div class="member-info">
                            <div class="team-name">Samruddhi Durge</div>
                            <div class="team-role" style="font-style: italic; opacity: 0.8;">"I make design decisions others argue about"</div>
                            <div class="team-contact">
                                <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                                +91 75584 74923
                            </div>
                        </div>
                    </div>

                    <!-- Team Member 4 -->
                    <div class="team-member" style="--i:3">
                        <div class="member-avatar" style="background: rgba(0, 176, 255, 0.2); color: #00B0FF; border-color: rgba(0, 176, 255, 0.3);">
                            <span>YG</span>
                        </div>
                        <div class="member-info">
                            <div class="team-name">Yadnesh Gawali</div>
                            <div class="team-role" style="font-style: italic; opacity: 0.8;">"Beauty up front, brains behind"</div>
                            <div class="team-contact">
                                <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                                +91 83839 38144
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>

    <!-- CONTACT US SECTION -->
    <section id="contact" class="section-spacer">
        <div class="container">
            <div class="glass-panel reveal" style="padding: 3rem 4rem; max-width: 800px; margin: 0 auto; text-align: center;">
                 <h2 style="font-size: 2.5rem; margin-bottom: 0.5rem; line-height: 1;">Connect with S-RAY</h2>
                 <p style="color: #b0c4de; margin-bottom: 2.5rem; font-weight: 500;">Ready to build safer spaces?</p>
                 
                 <!-- Main Email -->
                 <div style="display: inline-flex; align-items: center; gap: 1rem; background: rgba(0, 210, 255, 0.05); padding: 1rem 2rem; border-radius: 50px; border: 1px solid rgba(0, 210, 255, 0.2); transition: all 0.3s ease; cursor: pointer;" onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 0 20px rgba(0,210,255,0.3)'" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='none'">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="color: var(--accent-safe);"><path stroke-linecap="round" stroke-linejoin="round" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                    <a href="mailto:apexventurs25@gmail.com" style="font-size: 1.1rem; color: white; text-decoration: none; font-weight: 500;">apexventurs25@gmail.com</a>
                 </div>
            </div>
        </div>
    </section>
    
    <style>
        /* Team Grid Styles (Inline for Specificity) */
        .team-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            perspective: 1000px; /* Scene depth */
        }
        
        .team-member {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 2rem;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
            transform-style: preserve-3d; /* Enable 3D children */
            position: relative;
            cursor: pointer;
            backdrop-filter: blur(10px);
            /* Gentle float animation */
            animation: floatCard 6s ease-in-out infinite;
            animation-delay: calc(var(--i, 0) * 1s); /* Staggered float */
        }

        /* Float Keyframes */
        @keyframes floatCard {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .team-member:hover {
            transform: translateY(-15px) rotateX(10deg) scale(1.05);
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.02));
            border-color: var(--accent-safe);
            box-shadow: 
                0 20px 40px -10px rgba(0,0,0,0.5),
                0 0 30px rgba(0, 210, 255, 0.2);
            z-index: 10;
        }
        
        .member-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(0, 210, 255, 0.1);
            color: #00d2ff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
            border: 1px solid rgba(0, 210, 255, 0.3);
            flex-shrink: 0;
            transition: transform 0.4s ease;
            transform: translateZ(20px); /* Pop out */
        }

        .team-member:hover .member-avatar {
            transform: translateZ(50px) scale(1.1); /* Pop out more on hover */
            background: var(--accent-safe);
            color: #000;
            box-shadow: 0 0 20px var(--accent-safe);
        }
        
        .member-info {
            display: flex;
            flex-direction: column;
            transform: translateZ(10px);
            transition: transform 0.4s ease;
        }

        .team-member:hover .member-info {
             transform: translateZ(30px); /* Text floats up */
        }
        
        .team-name {
            font-size: 1.2rem;
            color: white;
            font-weight: 600;
            margin-bottom: 4px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }
        
        .team-role {
            font-size: 0.9rem;
            color: var(--accent-safe);
            margin-bottom: 6px;
            font-weight: 500;
        }
        
        .team-contact {
            font-size: 0.95rem;
            color: var(--text-dim);
            display: flex;
            align-items: center;
            gap: 8px;
            transition: color 0.3s;
        }

        .team-member:hover .team-contact {
            color: white;
        }

        @media (max-width: 700px) {
            .team-grid {
                grid-template-columns: 1fr;
            }
            .team-member { padding: 1.5rem; }
        }
    </style>

    <!-- FOOTER -->
    <footer id="footer" style="padding: 5rem 0; text-align: center; border-top: 1px solid rgba(255,255,255,0.05);">
        <div class="container">
            <h2 style="font-size: 1.5rem; margin-bottom: 2rem;">S-RAY</h2>
            <p style="font-size: 0.9rem; margin-bottom: 2rem;">Designed for the public good.</p>
            <div style="display: flex; justify-content: center; gap: 2rem;">
                <a href="#" style="color: var(--text-dim); text-decoration: none; font-size: 0.9rem;">Technology</a>
                <a href="#" style="color: var(--text-dim); text-decoration: none; font-size: 0.9rem;">Ethics</a>
                <a href="#about" style="color: var(--text-dim); text-decoration: none; font-size: 0.9rem;">Contact</a>
            </div>
            <div style="margin-top: 3rem; color: var(--text-dim); font-size: 0.8rem; opacity: 0.5;">
                &copy; 2026 S-RAY Intelligence Systems.
            </div>
        </div>
    </footer>

   <!-- JAVASCRIPT -->
    <script>
        /* --- GOOGLE MAPS STYLE SIMULATION --- */
        const initSafetyMap = () => {
            const canvas = document.getElementById('safety-canvas');
            if(!canvas) return;
            
            const ctx = canvas.getContext('2d');
            let w, h;

            // Map Config (Google Maps Dark Theme Colors)
            const colors = {
                bg: '#242f3e',
                road: '#38414e',
                block: '#17263c',
                text: '#9ca5b3',
                routeA: '#00e676', // Green
                routeB: '#00d2ff', // Cyan (Alternate)
                congestion: '#ff5252' // Red
            };

            // Define City Blocks (x, y, w, h in %)
            const cityBlocks = [
                {x:0, y:0, w:0.3, h:0.4}, {x:0.4, y:0, w:0.2, h:0.4}, {x:0.7, y:0, w:0.3, h:0.3},
                {x:0, y:0.5, w:0.3, h:0.5}, {x:0.4, y:0.5, w:0.2, h:0.2}, {x:0.7, y:0.4, w:0.3, h:0.6},
                {x:0.4, y:0.8, w:0.2, h:0.2}
            ];

            // Define Routes (Polyline points 0-1 relative)
            // Path A: Straight shot up the main avenue
            const routeA = [
                {x: 0.35, y: 0.9}, // Start
                {x: 0.35, y: 0.45}, // Intersection 1
                {x: 0.35, y: 0.1}   // End (Gate A)
            ];

            // Path B: Side street detour
            const routeB = [
                {x: 0.35, y: 0.9}, // Start
                {x: 0.35, y: 0.75},
                {x: 0.65, y: 0.75}, // Turn right
                {x: 0.65, y: 0.35}, // Go up side street
                {x: 0.65, y: 0.1}   // End (Gate B)
            ];

            let activeRoute = 'A';
            let lastSwitch = 0;
            let routeProgress = 0; // For drawing the line animation

            const resize = () => {
                const rect = canvas.parentElement.getBoundingClientRect();
                w = canvas.width = rect.width;
                h = canvas.height = rect.height;
            };
            window.addEventListener('resize', resize);
            resize();

            // Function to draw a route line
            const drawRoute = (points, color, isMain) => {
                if(points.length < 2) return;

                ctx.lineCap = "round";
                ctx.lineJoin = "round";

                // 1. Draw Outer Glow
                ctx.shadowBlur = isMain ? 15 : 0;
                ctx.shadowColor = color;
                
                // 2. Draw Main Line
                ctx.beginPath();
                ctx.strokeStyle = color;
                ctx.lineWidth = isMain ? 8 : 6;
                ctx.globalAlpha = isMain ? 1 : 0.3; // Dim inactive route

                ctx.moveTo(points[0].x * w, points[0].y * h);
                for(let i=1; i<points.length; i++) {
                    ctx.lineTo(points[i].x * w, points[i].y * h);
                }
                ctx.stroke();
                
                ctx.globalAlpha = 1;
                ctx.shadowBlur = 0;

                // 3. Draw Directional Arrows (Animated)
                if (isMain) {
                    const time = Date.now() * 0.001; // Speed
                    ctx.fillStyle = "white";
                    
                    // Walk along the segments
                    let dist = 0; // total distance logic simplified for grid
                    // Just placing dots for now to simulate flow
                    const offset = (time % 1); // 0 to 1 loop
                    
                    // Simple logic for 2-segment path A
                    // Drawing animated dots along the line
                    // Interpolate points based on time for "marching ants" look
                    // (Simplified for this demo to just pulsating line)
                }
            };

            // Function to draw User Puck
            const drawUser = (pos) => {
                const px = pos.x * w;
                const py = pos.y * h;

                // View Cone
                ctx.beginPath();
                ctx.moveTo(px, py);
                ctx.arc(px, py, 40, -Math.PI/2 - 0.5, -Math.PI/2 + 0.5); // Facing Up
                ctx.fillStyle = "rgba(66, 133, 244, 0.3)"; // Google Blue
                ctx.fill();

                // Puck
                ctx.beginPath();
                ctx.arc(px, py, 8, 0, Math.PI * 2);
                ctx.fillStyle = "white";
                ctx.fill();
                ctx.beginPath();
                ctx.arc(px, py, 5, 0, Math.PI * 2);
                ctx.fillStyle = "#4285F4";
                ctx.fill();
            };

            const animate = () => {
                const now = Date.now();
                
                // --- UPDATE LOGIC ---
                if (now - lastSwitch > 5000) { // Every 5 seconds toggle traffic
                    activeRoute = activeRoute === 'A' ? 'B' : 'A';
                    lastSwitch = now;
                    
                    // Update DOM UI
                    const navHeader = document.getElementById('nav-instruction');
                    const navDist = document.getElementById('nav-distance');
                    const navTime = document.getElementById('nav-time');
                    const stepA = document.getElementById('step-A');
                    const stepB = document.getElementById('step-B');

                    if(activeRoute === 'A') {
                        navHeader.innerText = "Head North towards Gate A";
                        navDist.innerText = "150m to exit";
                        navTime.innerText = "2 min";
                        navTime.style.color = "#00e676";
                        stepA.classList.add('active'); stepB.classList.remove('active');
                    } else {
                        navHeader.innerText = "Rerouting via East Wing...";
                        navDist.innerText = "210m to exit";
                        navTime.innerText = "4 min";
                        navTime.style.color = "#ffa500";
                        stepB.classList.add('active'); stepA.classList.remove('active');
                    }
                }

                // --- DRAW MAP ---
                // 1. Background (Water/Land)
                ctx.fillStyle = colors.bg;
                ctx.fillRect(0, 0, w, h);

                // 2. Roads (We fill everything with road color, then put blocks on top)
                ctx.fillStyle = colors.road;
                ctx.fillRect(0, 0, w, h);

                // 3. Blocks (Buildings)
                ctx.fillStyle = colors.block;
                for(let b of cityBlocks) {
                    ctx.fillRect(b.x * w, b.y * h, b.w * w, b.h * h);
                }

                // --- DRAW ROUTES ---
                // Draw inactive first
                if (activeRoute === 'A') {
                    drawRoute(routeB, colors.congestion, false); // B is bad
                    drawRoute(routeA, colors.routeA, true); // A is good
                } else {
                    drawRoute(routeA, colors.congestion, false); // A is bad
                    drawRoute(routeB, colors.routeB, true); // B is good
                }

                // --- DRAW MARKERS ---
                // Gate A
                ctx.fillStyle = "white";
                ctx.font = "bold 12px Inter, sans-serif";
                ctx.fillText("GATE A", 0.35 * w + 15, 0.1 * h);
                ctx.beginPath(); ctx.arc(0.35 * w, 0.1 * h, 6, 0, Math.PI*2); ctx.fill();

                // Gate B
                ctx.fillText("GATE B", 0.65 * w + 15, 0.1 * h);
                ctx.beginPath(); ctx.arc(0.65 * w, 0.1 * h, 6, 0, Math.PI*2); ctx.fill();

                // --- DRAW USER ---
                // Interpolate position along path for effect? 
                // For now, keep user fixed at start to simulate "You Are Here"
                drawUser({x: 0.35, y: 0.9});

                requestAnimationFrame(animate);
            };
            animate();
        };

        /* --- STATUS CYCLE ANIMATION --- */
        const initStatusCycle = () => {
            const statusText = document.getElementById('status-text');
            const statusSub = document.getElementById('status-sub');
            const statusPulse = document.getElementById('status-pulse');
            const visBg = document.getElementById('vis-bg');
            
            if (!statusText || !statusPulse) return;

            // Updated Colors based on request:
            // Safe -> Green (Can Go)
            // Moderate -> Orange (Wait)
            // Critical -> Red (Can't Go)
            const statuses = [
                { 
                    title: "Safe", 
                    sub: "Status: Open", 
                    color: "#00e676", 
                    pulse: "rgba(0, 230, 118, 0.4)",
                    bg: "radial-gradient(circle, rgba(0, 230, 118, 0.15) 0%, rgba(0,0,0,0) 80%)"
                },
                { 
                    title: "Moderate", 
                    sub: "Status: Wait", 
                    color: "#ff9100", 
                    pulse: "rgba(255, 145, 0, 0.4)",
                    bg: "radial-gradient(circle, rgba(255, 145, 0, 0.15) 0%, rgba(0,0,0,0) 80%)"
                },
                { 
                    title: "Critical", 
                    sub: "Status: Closed", 
                    color: "#ff1744", 
                    pulse: "rgba(255, 23, 68, 0.4)",
                    bg: "radial-gradient(circle, rgba(255, 23, 68, 0.15) 0%, rgba(0,0,0,0) 80%)"
                }
            ];
            
            let index = 0;

            // Initialize first state
            statusText.style.color = statuses[0].color;
            statusText.innerText = statuses[0].title;
            statusSub.innerText = statuses[0].sub;
            statusPulse.style.background = `radial-gradient(circle, ${statuses[0].pulse} 0%, transparent 70%)`;
            visBg.style.background = statuses[0].bg;

            setInterval(() => {
                index = (index + 1) % statuses.length;
                const nextState = statuses[index];

                // Animate Out Text
                gsap.to([statusText, statusSub], {
                    opacity: 0,
                    y: 20,
                    duration: 0.3,
                    onComplete: () => {
                        // Change Content
                        statusText.innerText = nextState.title;
                        statusSub.innerText = nextState.sub;
                        statusText.style.color = nextState.color;
                        
                        // Update Backgrounds
                        statusPulse.style.background = `radial-gradient(circle, ${nextState.pulse} 0%, transparent 70%)`;
                        visBg.style.background = nextState.bg;
                        
                        // Animate In Text
                        gsap.to([statusText, statusSub], {
                            opacity: 1,
                            y: 0,
                            duration: 0.5,
                            ease: "back.out(1.7)",
                            stagger: 0.1
                        });
                    }
                });
            }, 3000); // 3 Seconds per state
        };

        /* --- THREE.JS + GSAP CROWD SIMULATION --- */
        const initThreeScene = () => {
            const container = document.getElementById('webgl-container');
            
            // Scene
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0x020408); 
            // FOG REMOVED per request to see far end clearly
            // scene.fog = new THREE.FogExp2(0x020408, 0.015); 

            // Camera
            const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 10, 28); 
            camera.lookAt(0, 0, 0);

            // Renderer
            const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            container.appendChild(renderer.domElement);

            // --- LIGHTING (Increased Intensity) ---
            
            // 1. Ambient Light - Bright global illumination
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.85); // Increased from 0.3
            scene.add(ambientLight);

            // 2. Camera Spotlight - "Flashlight" effect
            const camSpot = new THREE.SpotLight(0xffffff, 2.0, 120, Math.PI / 3, 0.5, 1);
            camSpot.position.set(0, 0, 0); 
            camSpot.target.position.set(0, 0, -20); 
            
            camera.add(camSpot);
            camera.add(camSpot.target);
            scene.add(camera);


            // --- CUSTOM "LOW POLY PERSON" GEOMETRY ---
            const createPersonGeometry = () => {
                const parts = [];
                
                // 1. Head (Sphere)
                const head = new THREE.SphereGeometry(0.25, 8, 8);
                head.translate(0, 1.7, 0); 
                parts.push(head);

                // 2. Torso (Box)
                const torso = new THREE.BoxGeometry(0.4, 0.7, 0.25);
                torso.translate(0, 1.1, 0);
                parts.push(torso);

                // 3. Arms (Cylinders)
                const armL = new THREE.CylinderGeometry(0.08, 0.07, 0.7, 6);
                armL.translate(-0.35, 1.1, 0);
                armL.rotateZ(0.1); 
                parts.push(armL);

                const armR = new THREE.CylinderGeometry(0.08, 0.07, 0.7, 6);
                armR.translate(0.35, 1.1, 0);
                armR.rotateZ(-0.1);
                parts.push(armR);

                // 4. Legs (Cylinders)
                const legL = new THREE.CylinderGeometry(0.09, 0.08, 0.85, 6);
                legL.translate(-0.15, 0.42, 0);
                parts.push(legL);

                const legR = new THREE.CylinderGeometry(0.09, 0.08, 0.85, 6);
                legR.translate(0.15, 0.42, 0);
                parts.push(legR);

                // Manual Merge logic for Vanilla JS
                let posCount = 0;
                parts.forEach(p => posCount += p.attributes.position.count);
                
                const combinedGeo = new THREE.BufferGeometry();
                const posArray = new Float32Array(posCount * 3);
                const normArray = new Float32Array(posCount * 3);
                
                let offset = 0;
                parts.forEach(geo => {
                    const p = geo.attributes.position.array;
                    const n = geo.attributes.normal.array; 
                    
                    posArray.set(p, offset * 3);
                    if(n) normArray.set(n, offset * 3);
                    
                    offset += geo.attributes.position.count;
                });
                
                combinedGeo.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
                combinedGeo.setAttribute('normal', new THREE.BufferAttribute(normArray, 3));
                
                return combinedGeo;
            };

            const personGeo = createPersonGeometry();
            // INCREASED COUNT
            const count = 2800; 
            
            // Updated Palette: Brighter Neons (Replaced Dark colors)
            const colorPalette = [
                new THREE.Color(0x00FFFF), // Electric Cyan
                new THREE.Color(0x40E0D0), // Neon Turquoise
                new THREE.Color(0x1E90FF), // Dodger Blue (Bright)
                new THREE.Color(0x00BFFF), // Deep Sky Blue (Bright)
                new THREE.Color(0x7B68EE), // Medium Slate Blue (Bright)
                new THREE.Color(0x8A2BE2), // BlueViolet (Bright)
                new THREE.Color(0x9932CC)  // DarkOrchid (Bright Purple)
            ];

            // Switched to MeshLambertMaterial to react to light (Spotlight)
            const material = new THREE.MeshLambertMaterial({ color: 0xffffff });
            const mesh = new THREE.InstancedMesh(personGeo, material, count);
            scene.add(mesh);

            const dummy = new THREE.Object3D();
            const agents = [];

            // Spawn Agents
            for (let i = 0; i < count; i++) {
                // INCREASED SPREAD on X
                const x = (Math.random() - 0.5) * 400; 
                // DEEPER Z
                const z = (Math.random() - 0.5) * 200; 
                
                const color = colorPalette[Math.floor(Math.random() * colorPalette.length)];
                mesh.setColorAt(i, color);

                const bobOffset = Math.random() * Math.PI * 2;
                const bobSpeed = 2 + Math.random() * 2;

                agents.push({ x, z, bobOffset, bobSpeed });
            }
            
            mesh.instanceColor.needsUpdate = true;

            // --- SCANNER EFFECT ---
            // WIDER Scan
            const scanGeo = new THREE.PlaneGeometry(400, 2); 
            // MeshBasicMaterial ignores lights, so it stays bright always
            const scanMat = new THREE.MeshBasicMaterial({ 
                color: 0xffffff, // Crystal White
                transparent: true, 
                opacity: 0, 
                side: THREE.DoubleSide 
            });
            const scanLine = new THREE.Mesh(scanGeo, scanMat);
            scanLine.rotation.x = -Math.PI / 2;
            scanLine.position.y = 4;
            scene.add(scanLine);

            const scanTl = gsap.timeline({ repeat: -1, repeatDelay: 3 });
            const scanProgress = { val: 0 };
            scanTl.to(scanProgress, { val: 1, duration: 2, ease: "linear" })
                  .set(scanProgress, { val: 0 }); 


            // --- ANIMATION LOOP ---
            const clock = new THREE.Clock();

            const animate = () => {
                const time = clock.getElapsedTime();

                // DRONE FLIGHT: Move Camera Forward
                camera.position.z -= 0.05; 

                // Agents
                agents.forEach((agent, i) => {
                    // Recycle - INCREASED LIMIT
                    if (agent.z > camera.position.z + 20) {
                        agent.z -= 220; 
                    }

                    // Idle Animation
                    const y = Math.abs(Math.sin(time * agent.bobSpeed + agent.bobOffset)) * 0.05;
                    const sway = Math.sin(time * 1 + agent.bobOffset) * 0.02;

                    dummy.position.set(agent.x, y, agent.z);
                    dummy.rotation.z = sway; 
                    dummy.scale.set(1, 1, 1);
                    dummy.updateMatrix();
                    mesh.setMatrixAt(i, dummy.matrix);
                });

                mesh.instanceMatrix.needsUpdate = true;

                // Scanner
                if (scanProgress.val > 0) {
                    scanLine.position.z = camera.position.z - 10 - (scanProgress.val * 50);
                    const opacity = Math.sin(scanProgress.val * Math.PI); 
                    scanLine.material.opacity = opacity * 0.7; 
                } else {
                    scanLine.material.opacity = 0;
                }
                
                // Camera Sway
                camera.position.x = Math.sin(time * 0.2) * 2;

                renderer.render(scene, camera);
                requestAnimationFrame(animate);
            };

            animate();


            // --- INTERACTION ---
            document.addEventListener('mousemove', (e) => {
                const mouseX = (e.clientX / window.innerWidth - 0.5) * 2;
                const mouseY = (e.clientY / window.innerHeight - 0.5) * 2;

                gsap.to(camera.rotation, {
                    x: -mouseY * 0.15,
                    y: -mouseX * 0.15,
                    duration: 0.5,
                    ease: "power2.out"
                });
                
                gsap.to(camera.position, {
                    x: Math.sin(clock.getElapsedTime() * 0.2) * 2 + (mouseX * 2), 
                    y: 10 + mouseY * 1,
                    duration: 0.5,
                    ease: "power2.out"
                });
            });


            // Resize
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        };

        /* --- SCROLL REVEAL (GSAP SCROLLTRIGGER) --- */
        const initScroll = () => {
            gsap.registerPlugin(ScrollTrigger);

            // Hero Text Entrance
            gsap.fromTo(".hero-content", 
                { opacity: 0, y: 50 }, 
                { opacity: 1, y: 0, duration: 1.5, ease: "power3.out", delay: 0.5 }
            );

            // SECTION TITLE TEXT ANIMATION (Word by Word)
            const wrappers = document.querySelectorAll(".word-wrapper");
            gsap.fromTo(wrappers, 
                { opacity: 0, y: 40, rotateX: 45 },
                {
                    opacity: 1,
                    y: 0,
                    rotateX: 0,
                    duration: 0.8,
                    stagger: 0.1,
                    ease: "power3.out",
                    scrollTrigger: {
                        trigger: ".section-title",
                        start: "top 80%",
                        toggleActions: "play none none reverse"
                    }
                }
            );

            // DESCRIPTION TEXT ANIMATION (Line by Line)
            const descLines = document.querySelectorAll(".animated-line");
            gsap.fromTo(descLines,
                { opacity: 0, y: 20 },
                {
                    opacity: 1,
                    y: 0,
                    duration: 0.8,
                    stagger: 0.15,
                    ease: "power3.out",
                    scrollTrigger: {
                        trigger: ".desc-text",
                        start: "top 80%",
                        toggleActions: "play none none reverse"
                    }
                }
            );

            // FEATURE CARDS Animation
            const featureItems = document.querySelectorAll('.feature-card');
            gsap.to(featureItems, {
                opacity: 1,
                y: 0,
                duration: 0.8,
                stagger: 0.2,
                ease: "back.out(1.2)",
                scrollTrigger: {
                    trigger: ".pop-group",
                    start: "top 75%",
                    toggleActions: "play none none reverse"
                }
            });

            // Single Element Pop (New)
            const popSingles = document.querySelectorAll('.pop-single');
            popSingles.forEach(el => {
                gsap.fromTo(el, 
                    { autoAlpha: 0, y: 50, scale: 0.9 }, 
                    { 
                        autoAlpha: 1, 
                        y: 0, 
                        scale: 1,
                        duration: 0.8, 
                        ease: "back.out(1.7)", 
                        scrollTrigger: {
                            trigger: el,
                            start: "top 85%",
                            toggleActions: "play none none reverse"
                        }
                    }
                );
            });

            // Standard Reveal Elements on Scroll (Fades)
            const revealElements = document.querySelectorAll(".reveal");
            revealElements.forEach(el => {
                gsap.fromTo(el, 
                    { autoAlpha: 0, y: 50 }, 
                    { 
                        autoAlpha: 1, 
                        y: 0, 
                        duration: 1, 
                        ease: "power3.out",
                        scrollTrigger: {
                            trigger: el,
                            start: "top 85%", // Trigger when top of element hits 85% of viewport height
                            toggleActions: "play none none reverse"
                        }
                    }
                );
            });
        };

        /* --- NAVBAR SCROLL --- */
        const initNav = () => {
            const nav = document.querySelector('.navbar');
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            const navLinks = document.querySelector('.nav-links');

            // Mobile menu toggle
            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('click', () => {
                    navLinks.classList.toggle('mobile-open');
                });
            }

            // Close mobile menu when a link is clicked
            const navLinkElements = navLinks.querySelectorAll('.nav-link');
            navLinkElements.forEach(link => {
                link.addEventListener('click', () => {
                    navLinks.classList.remove('mobile-open');
                });
            });

            window.addEventListener('scroll', () => {
                const currentScroll = window.pageYOffset;
                if (currentScroll > 50) {
                    nav.style.background = 'rgba(2, 4, 8, 0.95)';
                } else {
                    nav.style.background = 'rgba(2, 4, 8, 0.85)';
                }
            });
        };

        document.addEventListener('DOMContentLoaded', () => {
            initThreeScene();
            initScroll();
            initNav();
            initStatusCycle();
            initSafetyMap(); // Add the new map
        });

    </script>
</body>
</html>
  